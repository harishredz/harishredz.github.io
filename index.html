import { useEffect, useRef } from "react";
import { Github, Linkedin, Mail, FileText, ArrowRight, Briefcase, School, Trophy, Code2 } from "lucide-react";
import { motion } from "framer-motion";

// ====== Quick theme knobs ======
const NAME = "Harish Goluguri";
const ROLE = "Financial Analyst | FP&A & Investments";
const TAGLINE = "Turning data into decisions — faster, clearer, and with measurable ROI.";
const EMAIL = "harishreddyice@gmail.com";
const LINKEDIN = "https://www.linkedin.com/in/harishredz";
const GITHUB = "https://github.com/"; // add if you want
const RESUME_URL = "#"; // replace with your resume link

export default function App() {
  return (
    <div className="min-h-screen w-full bg-slate-950 text-slate-100 selection:bg-violet-500/30 selection:text-white">
      <AuroraGrid />
      <Navbar />
      <main className="mx-auto max-w-6xl px-6">
        <Hero />
        <About />
        <Skills />
        <Experience />
        <Projects />
        <Education />
        <Awards />
        <Contact />
      </main>
      <footer className="mt-20 border-t border-white/10 py-10 text-center text-sm text-slate-400">
        © {new Date().getFullYear()} {NAME}. Built with ❤️ using React + Tailwind + Framer Motion.
      </footer>
    </div>
  );
}

// ====== Background (animated constellations style, lightweight) ======
function AuroraGrid() {
  const canvasRef = useRef(null);
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext("2d");
    let w, h, animationId;
    const DPR = Math.min(2, window.devicePixelRatio || 1);

    const particles = Array.from({ length: 90 }, () => ({
      x: Math.random(),
      y: Math.random(),
      vx: (Math.random() - 0.5) * 0.0006,
      vy: (Math.random() - 0.5) * 0.0006,
      r: Math.random() * 1.6 + 0.3,
    }));

    const resize = () => {
      w = canvas.clientWidth; h = canvas.clientHeight;
      canvas.width = w * DPR; canvas.height = h * DPR; ctx.scale(DPR, DPR);
    };
    resize();
    window.addEventListener("resize", resize);

    const tick = () => {
      ctx.clearRect(0, 0, w, h);
      // aurora gradient
      const g = ctx.createRadialGradient(w*0.7, h*0.2, 80, w*0.8, h*0.1, Math.max(w,h));
      g.addColorStop(0, "rgba(139,92,246,0.12)");
      g.addColorStop(1, "rgba(15,23,42,0)");
      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

      particles.forEach(p => {
        p.x += p.vx; p.y += p.vy;
        if (p.x < 0 || p.x > 1) p.vx *= -1;
        if (p.y < 0 || p.y > 1) p.vy *= -1;
      });

      // draw links
      for (let i=0;i<particles.length;i++){
        for (let j=i+1;j<particles.length;j++){
          const a = particles[i], b = particles[j];
          const dx = (a.x-b.x)*w, dy = (a.y-b.y)*h; const d = Math.hypot(dx,dy);
          if (d < 110){
            ctx.strokeStyle = `rgba(148,163,184,${0.08 * (1-d/110)})`;
            ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(a.x*w, a.y*h); ctx.lineTo(b.x*w, b.y*h); ctx.stroke();
          }
        }
      }

      // dots
      particles.forEach(p=>{
        ctx.fillStyle = "rgba(203,213,225,0.8)";
        ctx.beginPath(); ctx.arc(p.x*w, p.y*h, p.r, 0, Math.PI*2); ctx.fill();
      });

      animationId = requestAnimationFrame(tick);
    };
    tick();
    return () => { cancelAnimationFrame(animationId); window.removeEventListener("resize", resize); };
  }, []);

  return (
    <div className="pointer-events-none fixed inset-0 -z-10">
      <canvas ref={canvasRef} className="h-full w-full" />
      <div className="absolute inset-0 bg-[radial-gradient(circle_at_10%_10%,rgba(139,92,246,0.1),transparent_40%),radial-gradient(circle_at_90%_20%,rgba(56,189,248,0.08),transparent_40%)]"/>
    </div>
  );
}

// ====== Navbar ======
function Navbar(){
  const items = ["About","Skills","Experience","Projects","Education","Awards","Contact"];
  return (
    <nav className="sticky top-0 z-20 backdrop-blur supports-[backdrop-filter]:bg-slate-950/40">
      <div className="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
        <a href="#home" className="font-semibold tracking-wide text-slate-200">{`<Harish/>`}</a>
        <div className="hidden gap-6 text-sm text-slate-300 md:flex">
          {items.map(i=> (
            <a key={i} href={`#${i.toLowerCase()}`} className="hover:text-white transition">{i}</a>
          ))}
        </div>
      </div>
    </nav>
  );
}

// ====== Sections ======
function Hero(){
  return (
    <section id="home" className="relative flex min-h-[78vh] flex-col items-start justify-center gap-6 pt-12">
      <motion.h1 initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} transition={{duration:0.6}} className="text-4xl font-extrabold tracking-tight sm:text-6xl">
        {NAME}
      </motion.h1>
      <motion.p initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} transition={{duration:0.7, delay:0.05}} className="text-xl text-slate-300">
        {ROLE}
      </motion.p>
      <motion.p initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} transition={{duration:0.8, delay:0.1}} className="max-w-2xl text-slate-300">
        {TAGLINE}
      </motion.p>
      <div className="mt-2 flex flex-wrap gap-3">
        <Social href={GITHUB} icon={<Github size={18}/>} label="GitHub" />
        <Social href={LINKEDIN} icon={<Linkedin size={18}/>} label="LinkedIn" />
        <Social href={`mailto:${EMAIL}`} icon={<Mail size={18}/>} label="Email" />
        <Social href={RESUME_URL} icon={<FileText size={18}/>} label="Resume" primary />
      </div>
    </section>
  );
}

function About(){
  return (
    <Section id="about" title="About">
      <p className="text-slate-300">
        Finance professional (FMVA®, SIE) with strengths in investment analysis, financial modeling, FP&A, and
        analytics. Proven track record improving forecast accuracy, liquidity, and decision speed via automation and
        executive‑ready reporting. Advanced in Excel, Power BI, Tableau, SAP S/4HANA/TRM, Bloomberg, SQL, and Python.
      </p>
    </Section>
  );
}

function Skills(){
  const items = [
    "Financial Modeling (DCF/IRR/NPV)",
    "Budgeting & Forecasting",
    "Revenue Recognition (GAAP) / SOX",
    "Treasury & Liquidity",
    "Power BI / Tableau / Excel (Power Query)",
    "SAP S/4HANA & TRM | SQL | Python",
    "Bloomberg (BQL) | WRDS",
  ];
  return (
    <Section id="skills" title="Skills">
      <ul className="grid gap-2 sm:grid-cols-2">
        {items.map(s=> (
          <li key={s} className="flex items-start gap-3 rounded-xl border border-white/10 bg-white/5 p-3">
            <Code2 className="mt-0.5 h-4 w-4 text-violet-400"/>
            <span className="text-slate-200">{s}</span>
          </li>
        ))}
      </ul>
    </Section>
  );
}

function Experience(){
  const roles = [
    {
      company:"Portfolio Management Group, Atlanta, United States",
      title:"Investment Analyst",
      period:"Jan 2025 – May 2025",
      bullets:[
        "Researched 30+ U.S. equities via Bloomberg/WSJ, driving $500K+ weekly reallocations and 3% alpha vs. benchmark.",
        "Built 8 GAAP‑compliant DCF/comps models and 5 custom screeners; boosted pitch accuracy by 30%.",
        "Presented 15+ buy/sell calls with risk‑return memos; influenced $500K+ portfolio shifts weekly.",
      ]
    },
    {
      company:"ANTLON, Hyderabad, India",
      title:"Senior Finance Analyst",
      period:"Nov 2022 – Dec 2023",
      bullets:[
        "Directed $70M+ budgets/forecasts in SAP S/4HANA; raised forecast accuracy to 96% and investor confidence.",
        "Automated 25+ Power BI/Excel workflows; cut close cycles 40% and freed 100+ hours/month.",
        "Led ROI analysis on 16 capex projects ($34M+); reallocated $6M to higher‑return initiatives.",
        "Negotiated vendor terms; reduced costs 15% (~$9M/yr) and accelerated collections.",
      ]
    },
    {
      company:"ANTLON, Hyderabad, India",
      title:"Finance Analyst",
      period:"Oct 2021 – Nov 2022",
      bullets:[
        "Flagged $2M+ inefficiencies via treasury variance analysis (Excel/Tableau); enabled targeted cost cuts.",
        "Built IRR/NPV models for 25+ projects ($20M+); improved investment approvals by 22%.",
        "Optimized $10M working capital with rolling cash forecasts across 6 departments.",
      ]
    },
    {
      company:"Neti Amravathi, Rajahmundry, India",
      title:"Finance Intern",
      period:"Apr 2020 – Sep 2021",
      bullets:[
        "Audited 25+ cost centers (Tally ERP); trimmed overheads 18% and reallocated $1.2M to core ops.",
        "Built Excel tracking/models for $5M+ grants; ensured 100% compliance and timely disbursement.",
        "Produced 6 budget variance analyses; improved forecast accuracy by 25%.",
      ]
    },
  ];
  return (
    <Section id="experience" title="Experience" icon={<Briefcase className="h-5 w-5"/>}>
      <div className="grid gap-6">
        {roles.map((r, idx)=> (
          <motion.article key={idx} initial={{opacity:0,y:12}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.45}} className="rounded-2xl border border-white/10 bg-white/5 p-5">
            <div className="flex flex-wrap items-baseline justify-between gap-2">
              <h3 className="text-lg font-semibold text-white">{r.title}</h3>
              <span className="text-xs text-slate-400">{r.period}</span>
            </div>
            <p className="mt-1 text-sm text-slate-300">{r.company}</p>
            <ul className="mt-3 ml-4 list-disc space-y-1.5 text-slate-200">
              {r.bullets.map((b,i)=>(<li key={i}>{b}</li>))}
            </ul>
          </motion.article>
        ))}
      </div>
    </Section>
  );
}

function Projects(){
  const items = [
    {
      title: "ESG Alpha Lab (GSU)",
      desc: "Analyzed ESG‑linked performance for 50+ firms using WRDS, Bloomberg, Python; improved model accuracy 18%.",
      link: "#"
    },
    {
      title: "Forecast Automation",
      desc: "9 Tableau/Power BI dashboards reduced manual reporting 45% and accelerated exec insights.",
      link: "#"
    },
  ];
  return (
    <Section id="projects" title="Projects">
      <div className="grid gap-6 sm:grid-cols-2">
        {items.map((p,i)=> (
          <a key={i} href={p.link} className="group rounded-2xl border border-white/10 bg-white/5 p-5 transition hover:border-violet-400/40">
            <h4 className="text-white">{p.title}</h4>
            <p className="mt-2 text-sm text-slate-300">{p.desc}</p>
            <span className="mt-3 inline-flex items-center gap-1 text-violet-300">View <ArrowRight size={14}/></span>
          </a>
        ))}
      </div>
    </Section>
  );
}

function Education(){
  return (
    <Section id="education" title="Education" icon={<School className="h-5 w-5"/>}>
      <Timeline
        items={[
          {
            title:"Georgia State University — MS in Finance",
            period:"Aug 2024 – Aug 2025",
            detail:"Graduate Certificate in FinTech Innovation; All‑Rounder Award 2025.",
          },
          {
            title:"Bharath University — BBA",
            period:"2018 – 2021",
            detail:"Graduated with distinction.",
          },
        ]}
      />
    </Section>
  );
}

function Awards(){
  return (
    <Section id="awards" title="Awards" icon={<Trophy className="h-5 w-5"/>}>
      <ul className="grid gap-2 sm:grid-cols-2">
        <li className="rounded-xl border border-white/10 bg-white/5 p-3">All‑Rounder Award 2025 — Georgia State University</li>
        <li className="rounded-xl border border-white/10 bg-white/5 p-3">FMVA® (CFI) — Financial Modeling & Valuation Analyst</li>
        <li className="rounded-xl border border-white/10 bg-white/5 p-3">SIE (FINRA) — Securities Industry Essentials</li>
      </ul>
    </Section>
  );
}

function Contact(){
  return (
    <Section id="contact" title="Contact">
      <div className="flex flex-wrap items-center gap-3 text-slate-300">
        <Social href={`mailto:${EMAIL}`} icon={<Mail size={18}/>} label={EMAIL} primary />
        <Social href={LINKEDIN} icon={<Linkedin size={18}/>} label="Connect on LinkedIn" />
      </div>
    </Section>
  );
}

// ====== Reusable bits ======
function Section({ id, title, icon, children }){
  return (
    <section id={id} className="scroll-mt-24 py-14">
      <div className="mb-6 flex items-center gap-2">
        {icon}
        <h2 className="text-2xl font-bold tracking-tight text-white">{title}</h2>
      </div>
      {children}
    </section>
  );
}

function Social({ href, icon, label, primary }){
  if (!href || href === "#") return (
    <span className="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200 opacity-60">
      {icon}{label}
    </span>
  );
  return (
    <a href={href} target="_blank" rel="noreferrer" className={`inline-flex items-center gap-2 rounded-full px-3 py-2 text-sm transition ${primary ? "bg-violet-500 text-white hover:bg-violet-400" : "border border-white/10 bg-white/5 text-slate-200 hover:bg-white/10"}`}>
      {icon}
      {label}
    </a>
  );
}

function Timeline({ items }){
  return (
    <ol className="relative ml-3 border-l border-white/10">
      {items.map((it, idx)=> (
        <li key={idx} className="mb-6 ml-4">
          <div className="absolute -left-1.5 mt-1 h-3 w-3 rounded-full bg-violet-400" />
          <h3 className="font-semibold text-white">{it.title}</h3>
          <p className="text-xs text-slate-400">{it.period}</p>
          <p className="mt-1 text-slate-300">{it.detail}</p>
        </li>
      ))}
    </ol>
  );
}

